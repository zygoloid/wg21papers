<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Core Issue 1850: Differences between definition context and point of
instantiation</title>

<style type="text/css">
  ins, ins > * { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  del, del > * { text-decoration:line-through; background-color:#FFA0A0 }
</style>

</head>

<body>
Richard Smith<br>
2014-02-13

<h1>Core Issue 1850: Differences between definition context and point of
instantiation</h1>

<p>
Change in 14.6 temp.res paragraph 8:
</p>

<blockquote>
If a
<ins>
hypothetical instantiation of a template immediately following its
definition would be ill-formed due to a construct that does not depend
on a template parameter, the program is ill-formed; no diagnostic is required.

If the interpretation of such a construct in the hypothetical instantiation is
different from the interpretation of the corresponding construct in any actual
instantiation of the template,
</ins>

<del>
type used in a non-dependent name is incomplete at the point at which a
template is defined but is complete at the point at which an instantiation is
done, and if the completeness of that type affects whether or not the program
is well-formed or affects the semantics of the program,
</del>
the program is ill-formed; no diagnostic is required.

<ins>
[&nbsp;<em>Note:</em> This can happen in situations including the following:
<ul>
<li>a type used in a non-dependent name is incomplete at the point at which a
template is defined but is complete at the point at which an instantiation is
performed, or
<li>an instantiation uses a default argument or default template argument that
had not been defined at the point at which the template was defined, or
<li>constant expression evaluation (5.19) within the template instantiation uses
  <ul>
  <li>the value of a <tt>const</tt> object of integral or unscoped enumeration
  type or
  <li>the value of a <tt>constexpr</tt> object or
  <li>the value of a reference or
  <li>the definition of a <tt>constexpr</tt> function,
  </ul>
and that entity was not defined when the template was defined, or
<li>a class template specialization or variable template specialization that
is specified by a non-dependent <em>simple-template-id</em> is used by the
template, and either it is instantiated from a partial specialization that was
not defined when the template was defined or it names an explicit
specialization that was not declared when the template was defined.
</ul>
]
</ins>
</blockquote>

</body></html>
