<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Core Issue 1677: Constant initialization via aggregate initialization</title>

<style type="text/css">
  ins, ins > * { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  del, del > * { text-decoration:line-through; background-color:#FFA0A0 }
</style>

</head>

<body>
Richard Smith<br>
2014-11-04

<h1>Core Issue 1677: Constant initialization via aggregate initialization</h1>

<p>
Change in 3.6.2 basic.start.init paragraph 2:
</p>

<!--
int a[1000]{} case NAD.
brace-or-equal-initializer case needs handling.

This approach *almost* works, but...
 ... {} has no full-expression. So we break the 'int a[1000]{}' case!
-->

<blockquote>
&hellip; <em>Constant initialization</em> is performed:

<ul>
<li>
<del>
if each full-expression (including implicit conversions) that appears in the
initializer of a reference with static or thread storage duration is a constant
expression (5.19) and the reference is bound to an lvalue designating an object
with static storage duration or to a temporary (see 12.2);
</del>
</li>

<li>
<ins>
if a reference with static or thread storage duration is initialized by a
full-expression (including implicit conversions) that is a glvalue constant
expression;
</ins>
</li>

<li>
if an object with static or thread storage duration is initialized by a
<del>constructor call, and if the initialization</del>
full-expression <ins>that</ins> is a constant initializer for the object;
</li>

<li>
if an object with static or thread storage duration
is not initialized by a
constructor call and
<del>if either the object</del>
is value-initialized
<del>or every full-expression that appears in its initializer is a constant expression</del>.
</li>
</ul>

&hellip;
</blockquote>

</body></html>
